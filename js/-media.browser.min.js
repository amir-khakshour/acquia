!function(a){namespace("Drupal.media.browser"),Drupal.media.browser.selectedMedia=[],Drupal.media.browser.mediaAdded=function(){},Drupal.media.browser.selectionFinalized=function(a){},Drupal.behaviors.experimentalMediaBrowser={attach:function(b){Drupal.settings.media.selectedMedia&&(Drupal.media.browser.selectMedia(Drupal.settings.media.selectedMedia),Drupal.media.browser.finalizeSelection()),a("#media-browser-tabset").tabs({show:Drupal.media.browser.resizeIframe}),a(".media-browser-tab").each(Drupal.media.browser.validateButtons),Drupal.media.browser.selectErrorTab()}},Drupal.media.browser.launch=function(){},Drupal.media.browser.validateButtons=function(){if(a(".form-submit",this).length>0){if(!(a(".fake-cancel",this).length>0)){var b=a(".form-actions",this);b.length||(b=a("form > div",this)),a('<a class="button button-no fake-cancel">'+Drupal.t("Cancel")+"</a>").appendTo(b).bind("click",Drupal.media.browser.submit)}}else a('<a class="button button-yes fake-ok">'+Drupal.t("Submit")+"</a>").appendTo(this).bind("click",Drupal.media.browser.submit),a(".fake-cancel",this).length>0||a('<a class="button button-no fake-cancel">'+Drupal.t("Cancel")+"</a>").appendTo(this).bind("click",Drupal.media.browser.submit)},Drupal.media.browser.submit=function(){var b=a(parent.window.document.body).find("#mediaBrowser").parent(".ui-dialog").find(".ui-dialog-buttonpane button");a(this).hasClass("fake-cancel")?b[1].click():b[0].click()},Drupal.media.browser.selectMedia=function(a){Drupal.media.browser.selectedMedia=a},Drupal.media.browser.finalizeSelection=function(){if(!Drupal.media.browser.selectedMedia)throw new exception(Drupal.t("Cannot continue, nothing selected"));Drupal.media.browser.selectionFinalized(Drupal.media.browser.selectedMedia)},Drupal.media.browser.resizeIframe=function(b){var c=a("body").height();a(parent.window.document).find("#mediaBrowser").height(c)},Drupal.media.browser.selectErrorTab=function(){var b=a("#media-browser-tabset").find(".error").parents(".media-browser-tab").attr("id");if(void 0!==b){var c=a('a[href="#'+b+'"]'),d=a("#media-browser-tabset a").index(c);a("#media-browser-tabset").tabs("select",d)}}}(jQuery);